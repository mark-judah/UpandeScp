[
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "gdah6dnhm6",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 01:42:25.493520",
  "name": "4ercj9a8ue",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    s.date_of_capture AS date,\\n    s.greenhouse AS greenhouse,\\n    p.pest AS pest,\\n    SUM(p.count) AS total_count\\nFROM\\n    `tabPests Scouting Entry` AS p\\nINNER JOIN\\n    `tabScouting Entry` AS s\\n    ON p.parent = s.name\\nGROUP BY\\n    s.date_of_capture,\\n    s.greenhouse,\\n    p.pest\\nORDER BY\\n    s.date_of_capture DESC,\\n    s.greenhouse,\\n    total_count DESC;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 0,
  "title": "Pest Observations",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "gdah6dnhm6",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 01:51:13.737981",
  "name": "5m010vbm6s",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    s.date_of_capture AS date,\\n    s.greenhouse AS greenhouse,\\n    d.disease AS disease,\\n    COUNT(d.name) AS total_count\\nFROM\\n    `tabDiseases Scouting Entry` AS d\\nINNER JOIN\\n    `tabScouting Entry` AS s\\n    ON d.parent = s.name\\nGROUP BY\\n    s.date_of_capture,\\n    s.greenhouse,\\n    d.disease\\nORDER BY\\n    s.date_of_capture DESC,\\n    s.greenhouse,\\n    total_count DESC;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 9,
  "title": "Disease Observations",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "gdah6dnhm6",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 01:51:53.985620",
  "name": "am6k8ubp6s",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    T2.greenhouse,\\n    T2.date_of_capture AS observation_date,\\n    T1.weed AS weed_name, -- Changed from T1.pest to T1.weed\\n    COUNT(T1.parent) AS weed_incidence -- Changed alias for clarity\\nFROM \\n    `tabWeeds Scouting Entry` AS T1 -- Changed to the child table for weeds\\nINNER JOIN \\n    `tabScouting Entry` AS T2 ON T2.name = T1.parent\\nGROUP BY \\n    T2.greenhouse,\\n    T2.date_of_capture,\\n    T1.weed -- Group by the weed name\\nORDER BY \\n    T2.date_of_capture ASC,\\n    T2.greenhouse ASC,\\n    weed_incidence DESC;\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 8,
  "title": "Weeds Observations",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "gdah6dnhm6",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 01:52:19.795894",
  "name": "augrnorno8",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    T2.greenhouse,\\n    T2.date_of_capture AS observation_date,\\n    T1.predator AS predator_name, -- Changed from T1.weed/T1.pest to T1.predator\\n    COUNT(T1.parent) AS predator_incidence -- Changed alias\\nFROM \\n    `tabPredators Scouting Entry` AS T1 -- Changed to the child table for predators\\nINNER JOIN \\n    `tabScouting Entry` AS T2 ON T2.name = T1.parent\\nGROUP BY \\n    T2.greenhouse,\\n    T2.date_of_capture,\\n    T1.predator -- Group by the predator name\\nORDER BY \\n    T2.date_of_capture ASC,\\n    T2.greenhouse ASC,\\n    predator_incidence DESC;\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 7,
  "title": "Predator Observations",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "gdah6dnhm6",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 01:55:19.317372",
  "name": "b7el12e470",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    T2.greenhouse,\\n    T2.date_of_capture AS observation_date,\\n    T1.physiological_disorders AS disorder_name, -- Changed to T1.physiological_disorders\\n    COUNT(T1.parent) AS disorder_incidence -- Changed alias\\nFROM \\n    `tabPhysiological Disorders Entry` AS T1 -- Changed to the child table for disorders\\nINNER JOIN \\n    `tabScouting Entry` AS T2 ON T2.name = T1.parent\\nGROUP BY \\n    T2.greenhouse,\\n    T2.date_of_capture,\\n    T1.physiological_disorders -- Group by the specific disorder name\\nORDER BY \\n    T2.date_of_capture ASC,\\n    T2.greenhouse ASC,\\n    disorder_incidence DESC;\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 6,
  "title": "Physiological ObservationsÂ ",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "gdah6dnhm6",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 01:58:00.169982",
  "name": "e7ug1jlljk",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    T2.greenhouse,\\n    T2.date_of_capture AS observation_date,\\n    T1.incident AS incident_name, -- Changed to T1.incident\\n    COUNT(T1.parent) AS incident_incidence -- Changed alias\\nFROM \\n    `tabIncidents Scouting Entry` AS T1 -- Changed to the child table for incidents\\nINNER JOIN \\n    `tabScouting Entry` AS T2 ON T2.name = T1.parent\\nGROUP BY \\n    T2.greenhouse,\\n    T2.date_of_capture,\\n    T1.incident -- Group by the specific incident name\\nORDER BY \\n    T2.date_of_capture ASC,\\n    T2.greenhouse ASC,\\n    incident_incidence DESC;\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 1,
  "title": "Incident Observations",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "gdah6dnhm6",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 01:58:26.860751",
  "name": "ehepu288hf",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"WITH ScoutPerformance AS (\\n    -- CTE (Common Table Expression) to calculate the individual scout performance first, \\n    -- based on the logic from the previous query (Scout + Date grouping).\\n    SELECT\\n        s.date_of_capture,\\n        COALESCE(emp.employee_name, s.scouts_name) AS Scout,\\n        COUNT(DISTINCT s.bed) AS BedsScouted,\\n        -- Zones Per Bed\\n        ROUND(COUNT(DISTINCT CONCAT(s.bed, '-', s.zone)) * 1.0 / COUNT(DISTINCT s.bed), 2) AS ZonesPerBed,\\n        -- Minutes Per Bed (Session Duration / Unique Beds)\\n        ROUND(\\n            TIME_TO_SEC(TIMEDIFF(MAX(s.time_of_capture), MIN(s.time_of_capture))) / 60.0\\n            / COUNT(DISTINCT s.bed),\\n            2\\n        ) AS MinutesPerBed,\\n        -- Beds Scouted per Minute (Beds / Total Time)\\n        ROUND(\\n            COUNT(DISTINCT s.bed)\\n            / (TIME_TO_SEC(TIMEDIFF(MAX(s.time_of_capture), MIN(s.time_of_capture))) / 60.0),\\n            2\\n        ) AS BedsPerMinute\\n    FROM\\n        `tabScouting Entry` AS s\\n    LEFT JOIN\\n        `tabEmployee` AS emp\\n        ON s.scouts_name = emp.name\\n    -- Group by Scout and Date to define the individual scouting session performance\\n    GROUP BY\\n        s.date_of_capture,\\n        Scout\\n)\\n-- Main query to calculate the Farm-Wide Average Metrics by Date\\nSELECT\\n    sp.date_of_capture,\\n    -- Farm Efficiency Metric 1: Average Minutes Per Bed across ALL scout sessions\\n    ROUND(AVG(sp.MinutesPerBed), 2) AS AvgMinutesPerBed,\\n    -- Farm Efficiency Metric 2: Average Bed Velocity (Beds per Minute) across ALL scout sessions\\n    ROUND(AVG(sp.BedsPerMinute), 2) AS AvgBedsPerMinute,\\n    -- Total Farm Coverage: Sum of all unique beds scouted by all scouts on that date\\n    SUM(sp.BedsScouted) AS TotalBedsScoutedOnDay,\\n    -- Average Sampling Rate: Average of the ZonesPerBed across all sessions\\n    ROUND(AVG(sp.ZonesPerBed), 2) AS AvgZonesPerBed\\nFROM\\n    ScoutPerformance AS sp\\n-- Final grouping is ONLY by Date\\nGROUP BY\\n    sp.date_of_capture\\nORDER BY\\n    sp.date_of_capture DESC;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 4,
  "title": "Minutes Per Bed",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "gdah6dnhm6",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 01:59:02.203263",
  "name": "esa2qmn3ut",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    T1.greenhouse,\\n    T2.date_of_capture,\\n    COUNT(DISTINCT T2.bed) AS beds_scouted,\\n    T3.total_available_beds,\\n    -- Calculate percentage: (Beds Scouted / Total Available Beds) * 100\\n    (COUNT(DISTINCT T2.bed) * 100.0 / T3.total_available_beds) AS percentage_beds_covered\\nFROM\\n    -- T2: Start with all scouting entries\\n    `tabScouting Entry` AS T2\\nLEFT JOIN\\n    -- T1: Join to Bed to get the Greenhouse (essential for grouping and T3 join)\\n    `tabBed` AS T1 ON T1.name = T2.bed\\nLEFT JOIN\\n    -- T3: Get the static, correct total count of beds per greenhouse\\n    (\\n        SELECT\\n            greenhouse,\\n            COUNT(name) AS total_available_beds\\n        FROM\\n            `tabBed`\\n        GROUP BY\\n            greenhouse\\n    ) AS T3 ON T1.greenhouse = T3.greenhouse\\nGROUP BY\\n    T1.greenhouse,\\n    T2.date_of_capture,\\n    T3.total_available_beds  -- Include the non-aggregated column in the GROUP BY\\nORDER BY\\n    T2.date_of_capture DESC,\\n    T1.greenhouse;\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 2,
  "title": "Greenhouse Coverage Percentage",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "gdah6dnhm6",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 01:59:28.356234",
  "name": "f4tqr6vtvv",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    s.date_of_capture,\\n    COALESCE(emp.employee_name, s.scouts_name) AS Scout,\\n    COUNT(DISTINCT s.bed) AS BedsScouted,\\n    -- Zones Per Bed (Renamed for clarity)\\n    ROUND(COUNT(DISTINCT CONCAT(s.bed, '-', s.zone)) * 1.0 / COUNT(DISTINCT s.bed), 2) AS ZonesPerBed,\\n    -- Minutes Per Bed (time spent per bed)\\n    ROUND(\\n        TIME_TO_SEC(TIMEDIFF(MAX(s.time_of_capture), MIN(s.time_of_capture))) / 60.0\\n        / COUNT(DISTINCT s.bed),\\n        2\\n    ) AS MinutesPerBed,\\n    -- NORMALIZED METRIC: Beds Scouted per Minute (Beds / Total Time)\\n    ROUND(\\n        COUNT(DISTINCT s.bed) -- Total Beds Scouted (Numerator)\\n        / (TIME_TO_SEC(TIMEDIFF(MAX(s.time_of_capture), MIN(s.time_of_capture))) / 60.0), -- Total Session Minutes (Denominator)\\n        2\\n    ) AS BedsPerMinute\\nFROM\\n    `tabScouting Entry` AS s\\nLEFT JOIN\\n    `tabEmployee` AS emp\\n    ON s.scouts_name = emp.name\\nGROUP BY\\n    s.date_of_capture,\\n    Scout\\nORDER BY\\n    s.date_of_capture DESC,\\n    BedsPerMinute DESC;\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 5,
  "title": "Scout Performance",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "gdah6dnhm6",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 01:59:55.717189",
  "name": "fd7p95ellq",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    T_Bucket.date_of_capture,\\n    COALESCE(T_Emp.employee_name, T_Bucket.scouts_name) AS scout_name,\\n    T_Bucket.greenhouse,\\n    T_Bucket.time_bucket,\\n    -- Y-Axis: Cumulative Count of Unique Zones Covered up to this time bucket\\n    (\\n        SELECT\\n            COUNT(DISTINCT T_Cumulative.zone)\\n        FROM\\n            `tabScouting Entry` AS T_Cumulative\\n        WHERE\\n            T_Cumulative.scouts_name = T_Bucket.scouts_name\\n            AND T_Cumulative.date_of_capture = T_Bucket.date_of_capture\\n            AND T_Cumulative.greenhouse = T_Bucket.greenhouse\\n            -- The condition for cumulative counting:\\n            -- Only count zones from entries recorded up to this current time bucket's end time\\n            AND T_Cumulative.time_of_capture <= T_Bucket.end_time_for_cumulative\\n    ) AS cumulative_zones_covered\\nFROM\\n    -- T_Bucket: Aggregates data into 5-minute time buckets and calculates the boundary time\\n    (\\n        SELECT\\n            scouts_name,\\n            date_of_capture,\\n            greenhouse,\\n            MIN(time_of_capture) AS bucket_start_time,\\n            MAX(time_of_capture) AS bucket_end_time,\\n            -- Calculate the 5-minute time bucket for the X-axis\\n            TIME_FORMAT(\\n                SEC_TO_TIME((FLOOR(TIME_TO_SEC(time_of_capture) / 300) * 300)),\\n                '%H:%i:%s'\\n            ) AS time_bucket,\\n            -- Calculate the exact end time of the 5-minute bucket for the cumulative subquery filter\\n            TIME(ADDTIME(\\n                SEC_TO_TIME(FLOOR(TIME_TO_SEC(MAX(time_of_capture)) / 300) * 300),\\n                '00:05:00'\\n            )) AS end_time_for_cumulative\\n        FROM\\n            `tabScouting Entry`\\n        GROUP BY\\n            scouts_name,\\n            date_of_capture,\\n            greenhouse,\\n            time_bucket\\n    ) AS T_Bucket\\nLEFT JOIN\\n    `tabEmployee` AS T_Emp\\n    ON T_Emp.name = T_Bucket.scouts_name\\nORDER BY\\n    T_Bucket.date_of_capture DESC,\\n    scout_name,\\n    T_Bucket.greenhouse,\\n    T_Bucket.bucket_start_time;\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 3,
  "title": "Scout Movement",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "g32rg6madv",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:03:23.110604",
  "name": "g91g2s2c0t",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    TS.date_of_capture AS observation_date,\\n    TS.greenhouse AS greenhouse, -- NEW FIELD: The greenhouse where the observation was made\\n    T1.disease AS disease_name, -- Specific disease (e.g., Botrytis)\\n    T1.stage AS disease_stage,\\n    -- Combines disease and stage for chart split/series.\\n    CONCAT(T1.disease, ' - ', T1.stage) AS trend_series,\\n    -- Tracks the total frequency of observation (occurrence count)\\n    COUNT(*) AS occurrence_count\\nFROM\\n    `tabDiseases Scouting Entry` AS T1\\nLEFT JOIN\\n    `tabScouting Entry` AS TS\\n    ON T1.parent = TS.name\\nWHERE\\n    TS.date_of_capture IS NOT NULL\\nGROUP BY\\n    TS.date_of_capture,\\n    TS.greenhouse, -- Grouping now includes the greenhouse\\n    T1.disease,\\n    T1.stage\\nORDER BY\\n    TS.date_of_capture DESC,\\n    TS.greenhouse,\\n    T1.disease,\\n    T1.stage;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 4,
  "title": "Disease Trends By Stage",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "g32rg6madv",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:04:03.058544",
  "name": "hqb6u8iqom",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    TS.date_of_capture AS observation_date,\\n    TS.greenhouse AS greenhouse,\\n    T1.pest AS pest_name, -- Specific pest (e.g., Thrips, Whiteflies)\\n    T1.stage AS pest_stage, -- Life stage (e.g., Adult, Larvae, Eggs)\\n    \\n    -- Combines pest and stage for chart split/series.\\n    CONCAT(T1.pest, ' - ', T1.stage) AS trend_series,\\n    \\n    -- The core quantitative metric for pests is the 'count' field.\\n    SUM(T1.count) AS total_pest_count\\nFROM\\n    `tabPests Scouting Entry` AS T1\\nLEFT JOIN\\n    `tabScouting Entry` AS TS\\n    ON T1.parent = TS.name\\nWHERE\\n    TS.date_of_capture IS NOT NULL\\nGROUP BY\\n    TS.date_of_capture,\\n    TS.greenhouse,\\n    T1.pest,\\n    T1.stage\\nORDER BY\\n    TS.date_of_capture DESC,\\n    TS.greenhouse,\\n    T1.pest,\\n    T1.stage;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 3,
  "title": "Pest Trends By Stage",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "g32rg6madv",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:04:38.300178",
  "name": "i62rrvqhgf",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    TS.date_of_capture AS observation_date,\\n    TS.greenhouse AS greenhouse,\\n    T1.predator AS predator_name, -- Specific predator (e.g., Californicus)\\n    T1.stage AS predator_stage, -- Life stage (e.g., Adult, Eggs)\\n    \\n    -- Combines predator and stage for chart split/series.\\n    CONCAT(T1.predator, ' - ', T1.stage) AS trend_series,\\n    \\n    -- The core quantitative metric is the 'count' field.\\n    SUM(T1.count) AS total_predator_count\\nFROM\\n    `tabPredators Scouting Entry` AS T1\\nLEFT JOIN\\n    `tabScouting Entry` AS TS\\n    ON T1.parent = TS.name\\nWHERE\\n    TS.date_of_capture IS NOT NULL\\nGROUP BY\\n    TS.date_of_capture,\\n    TS.greenhouse,\\n    T1.predator,\\n    T1.stage\\nORDER BY\\n    TS.date_of_capture DESC,\\n    TS.greenhouse,\\n    T1.predator,\\n    T1.stage;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 0,
  "title": "Predator Trends By Stage",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "g32rg6madv",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:06:02.724088",
  "name": "iusrgcvu1c",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    TS.date_of_capture AS observation_date,\\n    TS.greenhouse AS greenhouse,\\n    T1.weed AS weed_name, -- Specific weed (e.g., Oxalis)\\n    \\n    -- Combines weed name for chart split/series.\\n    CONCAT(T1.weed, ' - Occurrence') AS trend_series,\\n    \\n    COUNT(*) AS total_occurrence_count\\nFROM\\n    `tabWeeds Scouting Entry` AS T1\\nLEFT JOIN\\n    `tabScouting Entry` AS TS\\n    ON T1.parent = TS.name\\nWHERE\\n    TS.date_of_capture IS NOT NULL\\nGROUP BY\\n    TS.date_of_capture,\\n    TS.greenhouse,\\n    T1.weed\\nORDER BY\\n    TS.date_of_capture DESC,\\n    TS.greenhouse,\\n    T1.weed;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 1,
  "title": "Weed Trends",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "jc15vpds1r",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:07:49.810475",
  "name": "jveh6somes",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    DATE(T2.actual_end_date) AS completion_date, -- Date the WO was finished/completed\\n    T2.custom_greenhouse AS greenhouse,         -- Adding greenhouse for context/filtering\\n    T1.item_name AS chemical,\\n    T1.stock_uom AS uom,\\n    SUM(T1.consumed_qty) AS actual_usage        -- Sum of the actual consumed quantity\\nFROM\\n    `tabWork Order Item` AS T1\\nINNER JOIN\\n    `tabWork Order` AS T2\\n    ON T1.parent = T2.name\\nWHERE\\n    -- Filter 1: Check if the Work Order is marked 'Completed'\\n    T2.status = 'Completed'\\n    -- Filter 2: Ensure it's an application plan\\n    AND T2.custom_type = 'Application Floor Plan'\\n    -- Filter 3 (Crucial Check): Ensure some quantity was actually consumed\\n    AND T1.consumed_qty > 0\\nGROUP BY\\n    completion_date,\\n    T2.custom_greenhouse,\\n    T1.item_name,\\n    T1.stock_uom\\nORDER BY\\n    completion_date DESC,\\n    actual_usage DESC;\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 2,
  "title": "Daily Chemical Usage",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "jc15vpds1r",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:08:25.747862",
  "name": "kagp5qp94v",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    DATE_FORMAT(T2.actual_end_date, '%Y-%m') AS usage_month, -- NEW: Groups data by Year and Month\\n    T1.item_name AS chemical,\\n    T1.stock_uom AS uom,\\n    SUM(T1.consumed_qty) AS monthly_usage\\nFROM\\n    `tabWork Order Item` AS T1\\nINNER JOIN\\n    `tabWork Order` AS T2\\n    ON T1.parent = T2.name\\nWHERE\\n    -- Filter 1: Check if the Work Order is marked 'Completed'\\n    T2.status = 'Completed'\\n    -- Filter 2: Ensure it's an application plan\\n    AND T2.custom_type = 'Application Floor Plan'\\n    -- Filter 3: Ensure some quantity was actually consumed\\n    AND T1.consumed_qty > 0\\nGROUP BY\\n    usage_month,\\n    T1.item_name,\\n    T1.stock_uom\\nORDER BY\\n    usage_month DESC,\\n    monthly_usage DESC;\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 0,
  "title": "Monthly Chemical Usage",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "jc15vpds1r",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:09:00.034800",
  "name": "knij3d9214",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    T2.name AS work_order_name,\\n    DATE(T2.actual_end_date) AS completion_date,\\n    T2.custom_greenhouse AS greenhouse,\\n    T1.item_name AS chemical,\\n    T1.stock_uom AS uom,\\n    T1.rate AS unit_cost,\\n    T1.consumed_qty AS consumed_quantity,\\n    (T1.consumed_qty * T1.rate) AS total_item_cost\\nFROM\\n    `tabWork Order Item` AS T1\\nINNER JOIN\\n    `tabWork Order` AS T2\\n    ON T1.parent = T2.name\\nWHERE\\n    T2.status = 'Completed'\\n    AND T2.custom_type = 'Application Floor Plan'\\n    AND T1.consumed_qty > 0\\n    AND T1.rate > 0\\nORDER BY\\n    completion_date DESC,\\n    T2.custom_greenhouse,\\n    T2.name,\\n    T1.item_name;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 1,
  "title": "Daily Chemical Cost",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "jp7kva8nej",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:41:18.690969",
  "name": "m2u773hqlb",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    T_Coverage.date_of_capture, -- NEW: Exposes the date for filtering\\n    T_Coverage.greenhouse,      -- Exposes the greenhouse for context\\n    T_Coverage.percentage_beds_covered\\nFROM\\n    (\\n        -- Subquery: Calculates the daily bed coverage percentage per greenhouse\\n        SELECT\\n            s.greenhouse,\\n            s.date_of_capture,\\n            -- T2.total_beds: Gets the total number of beds available in that greenhouse\\n            T2.total_beds,\\n            -- Percentage: (Count of distinct beds scouted) * 100.0 / (Total available beds)\\n            (COUNT(DISTINCT s.bed) * 100.0 / T2.total_beds) AS percentage_beds_covered\\n        FROM\\n            `tabScouting Entry` AS s\\n        INNER JOIN\\n            -- T2: Derived table to count the TOTAL number of beds available per greenhouse\\n            (\\n                SELECT\\n                    greenhouse,\\n                    COUNT(name) AS total_beds\\n                FROM\\n                    `tabBed`\\n                GROUP BY\\n                    greenhouse\\n            ) AS T2\\n            ON s.greenhouse = T2.greenhouse\\n        GROUP BY\\n            s.greenhouse,\\n            s.date_of_capture,\\n            T2.total_beds\\n    ) AS T_Coverage\\nORDER BY\\n    T_Coverage.date_of_capture DESC,\\n    T_Coverage.greenhouse;\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 2,
  "title": "Bed Coverage",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "jp7kva8nej",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:12:20.052201",
  "name": "mmdl92g79l",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    -- Grouping field: The date the scouting occurred\\n    T1.date_of_capture AS scouting_date,\\n    -- Count the number of unique greenhouses that had at least one scouting entry on this date\\n    COUNT(DISTINCT T1.greenhouse) AS total_greenhouses_scouted\\nFROM\\n    `tabScouting Entry` AS T1\\n-- Group the results by the date of capture\\nGROUP BY\\n    T1.date_of_capture\\n-- Order by date to track the trend over time\\nORDER BY\\n    T1.date_of_capture DESC;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 0,
  "title": "Total Greenhouses Scouted",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "jp7kva8nej",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": null,
  "modified": "2025-10-28 02:12:48.440436",
  "name": "mvhkc7btck",
  "old_name": null,
  "operations": "[]",
  "read_only": false,
  "sort_order": 4,
  "title": "Application Floor Plans Status",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "jc15vpds1r",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:13:20.004565",
  "name": "n7vubm69rv",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"WITH RECURSIVE\\n\\nspray_plans AS (\\n  SELECT\\n    wo.name AS spray_plan,\\n    wo.custom_greenhouse AS greenhouse,\\n    wo.custom_spray_team AS team,\\n    wo.custom_variety AS variety,\\n    wo.custom_scheduled_application_time AS start_dt,\\n    wo.custom_reentry_time AS end_dt,\\n    ROUND(TIME_TO_SEC(TIMEDIFF(wo.custom_reentry_time, wo.custom_scheduled_application_time)) / 3600, 2) AS duration_hrs\\n  FROM `tabWork Order` wo\\n  WHERE\\n    wo.custom_type = 'Application Floor Plan'\\n    AND wo.docstatus = 1\\n    AND DATE(wo.custom_scheduled_application_time) >= CURDATE()\\n),\\n\\nbounds AS (\\n  SELECT\\n    FROM_UNIXTIME(FLOOR(UNIX_TIMESTAMP(CURDATE()) / 3600) * 3600) AS bucket_start,\\n    FROM_UNIXTIME(CEIL(UNIX_TIMESTAMP(MAX(end_dt)) / 3600) * 3600) AS bucket_end\\n  FROM spray_plans\\n),\\n\\ntime_buckets AS (\\n  SELECT bucket_start AS bucket_dt FROM bounds\\n  UNION ALL\\n  SELECT ADDTIME(bucket_dt, '01:00:00')\\n  FROM time_buckets, bounds\\n  WHERE bucket_dt < bounds.bucket_end\\n)\\n\\nSELECT\\n  DATE(tb.bucket_dt) AS spray_date,\\n  sp.greenhouse,\\n  sp.spray_plan,\\n  sp.team,\\n  sp.variety,\\n  sp.start_dt,\\n  sp.end_dt,\\n  sp.duration_hrs,\\n  tb.bucket_dt,\\n  CASE\\n    WHEN tb.bucket_dt >= sp.start_dt AND tb.bucket_dt < sp.end_dt THEN 1\\n    ELSE 0\\n  END AS is_active,\\n  CASE\\n    WHEN tb.bucket_dt >= sp.end_dt AND tb.bucket_dt <= sp.end_dt + INTERVAL 12 HOUR THEN 1\\n    ELSE 0\\n  END AS reentry_allowed\\nFROM spray_plans sp\\nJOIN time_buckets tb\\n  ON tb.bucket_dt BETWEEN sp.start_dt AND sp.end_dt + INTERVAL 12 HOUR\\nORDER BY sp.greenhouse, sp.spray_plan, tb.bucket_dt;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 3,
  "title": "Application Floor Plan Schedule",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "jp7kva8nej",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:36:44.918952",
  "name": "4vqtej7h0d",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    COUNT(name) AS total_greenhouses\\nFROM\\n    `tabWarehouse`\\nWHERE\\n    warehouse_type = 'Greenhouse'; -- Key filter to identify a greenhouse\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 1,
  "title": "Total Greenhouses",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 },
 {
  "docstatus": 0,
  "doctype": "Insights Query v3",
  "folder": "g32rg6madv",
  "is_builder_query": 0,
  "is_native_query": 1,
  "is_script_query": 0,
  "linked_queries": "[]",
  "modified": "2025-10-28 02:55:03.835665",
  "name": "fngmojd8r5",
  "old_name": null,
  "operations": "[\n {\n  \"data_source\": \"Site DB\",\n  \"raw_sql\": \"SELECT\\n    TS.date_of_capture AS observation_date,\\n    TS.greenhouse AS greenhouse,\\n    T1.physiological_disorders AS disorder_name, -- Specific disorder (e.g., Bent Necks)\\n    \\n    -- Combines disorder name for chart split/series.\\n    CONCAT(T1.physiological_disorders, ' - Occurrence') AS trend_series,\\n    \\n    -- We count the number of times this specific disorder was recorded\\n    COUNT(*) AS total_occurrence_count\\nFROM\\n    `tabPhysiological Disorders Entry` AS T1\\nLEFT JOIN\\n    `tabScouting Entry` AS TS\\n    ON T1.parent = TS.name\\nWHERE\\n    TS.date_of_capture IS NOT NULL\\nGROUP BY\\n    TS.date_of_capture,\\n    TS.greenhouse,\\n    T1.physiological_disorders\\nORDER BY\\n    TS.date_of_capture DESC,\\n    TS.greenhouse,\\n    T1.physiological_disorders;\\n\",\n  \"type\": \"sql\"\n }\n]",
  "read_only": false,
  "sort_order": 2,
  "title": "Physiological Disorder Trends",
  "use_live_connection": 1,
  "variables": [],
  "workbook": "1"
 }
]